---
title: "Final Project"
author:
- Aldís Helga Björgvinsdóttir (s212956)
- Helene Wegener
- Lasse Rene
- Søren Sandgaard
- Mikkel Swartz
date: '2022-04-25'
output:
  ioslides_presentation:
    logo: DTU_Logo_blank.png
    widescreen: true
    smaller: True
    #css: styles.css
subtitle: Group 15
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r include = FALSE}
source(file = "/cloud/project/R/00_doit.R",local = FALSE)
```

## Introduction to the Dataset (Lasse)
<div style="float: left; width: 85%;">
### The Dataset
-   Real Breast Cancer Data
-   [Source](https://www.kaggle.com/code/varshinipj/breast-cancer-gene-data/data)
-   Raw dataset has 341 observations and 16 variables
-   Clean dataset has 307 observations and 14 variables
-   Augmented dataset has 307 observations and 16 variables

</div>
HUSK KILDE
<div style="float: left; width: 15%;">
```{r breast_cancer, echo=FALSE, out.width='125px', out.height='125px', fig.align = 'left' }
knitr::include_graphics("/cloud/project/doc/breastcancer.png")
```
</div>

## Fileflow & Methods (Soren)
<div style="float: left; width: 40%;">
- Workflow process
  - Data loading
  - Data wrangling
  - Exploratory data analysis
  - In-depth analysis and modelling
- Results
  - General visualizations
  - Principal component analysis
  - Logistic Regression
  - Shiny App
</div>
<div style="float: left; width: 50%;">
```{r workflow, echo=FALSE, out.width='550px', out.height='500px', fig.align= 'center'}
knitr::include_graphics("/cloud/project/doc/fileflow.png")
```
</div>

<!-- <div style="float: left; width: 40%;"> -->
<!-- ```{r fileflow, echo=FALSE, out.width='250px', out.height='300px', fig.pos = 'center'} -->
<!-- knitr::include_graphics("/cloud/project/doc/method_flow.png") -->
<!-- ``` -->
<!-- </div> -->

## Data Wrangling (Helene)

<div style="float: left; width: 50%;">
### The Dataset
- Correct classes + date format 
- Columns dropped: ER.status and PR.status

- Patient status binary for PCA and logistic regression 
- Death month to see the distribution of the month that people die in

</div>

<div style="float: left; width: 50%;">
```{r data_wrangling, echo=FALSE, out.width='360', out.height='405', fig.align = 'center'}
knitr::include_graphics("/cloud/project/doc/data_wrangling_flow.png")
```
</div>

## Results: Plot recreations (Aldis)
<div style="float: right; width: 100%;">
```{r age_cancer_type, echo=FALSE, out.width='570px', out.height='260px', fig.align= 'center'}
knitr::include_graphics(c("/cloud/project/doc/original_are_range_per_cancer_type.png","/cloud/project/results/recreation_age_groups_by_cancer_type.png"))
```
</div>

## Results: Data Visualization (Aldis)
<div style="float: left; width: 50%;">
```{r datavisualization1, echo=FALSE, out.width='350px', out.height='250px', fig.align= 'center'}
knitr::include_graphics(c("/cloud/project/results/distribution_of_tumour_stage_and_patient_status.png","/cloud/project/results/histology_density_by_protein.png"))
```
</div>

<div style="float: left; width: 50%;">
-   Percentage of patient status for each cancer stage
-   Mortality increases with tumour stage
-   Unequal subgroups in tumour stage variable
\
\
\
\
\
\
\
\
-   Density of protein expression for cancer types
-   Proteins are unknown
-   Mucinous Carcinomase differentiates from other cancer types
</div>


## Results: Logistic Regression (Soren)
<div style="float: left; width: 30%;">
- Here I will have some text
</div>

<div style="float: right; width: 50%;">
```{r manhattan, echo=FALSE, out.width='250px', out.height='500px', fig.align= 'center'}
knitr::include_graphics("/cloud/project/results/manhattan_plot_logistic_regression.png")
```


```{r}
# models %>% 
#   select(Protein,
#          neglog10p,
#          Significant) %>% 
#   ggplot(data = .,
#          mapping = aes(x = Protein,
#                        y = neglog10p)) + 
#   geom_point(mapping = aes(color = Significant),
#              size = 2,
#              alpha = 1) + 
#   geom_hline(mapping = aes(yintercept = -log10(0.05)),
#              color = "Black",
#              alpha = 0.5,
#              linetype = "dashed") + 
#   geom_polygon(mapping = aes(x = c(0.4,0.4,4.6,4.6),
#                              y = c(-log10(0.05),1.75,1.75,-log10(0.05))),
#                fill = "Green",
#                alpha = 0.1) +
#   geom_polygon(mapping = aes(x = c(0.4,0.4,4.6,4.6),
#                              y = c(-0,-log10(0.05),-log10(0.05),0)),
#                fill = "Red",
#                alpha = 0.1) +
#   annotate(geom = "text",
#            x = 1,
#            y = 1.7,
#            label = "Significant",
#            size = 2,
#            color = "Darkgreen") +
#   annotate(geom = "text",
#            x=1,
#            y=1.25,
#            label = "Insignificant",
#            size = 2,
#            color = "Darkred") +
#   our_theme(legend_position = "bottom",
#             x_angle = 45) +
#   labs(x = "",
#        y = "Negative log10 of p-value",
#       title = "Manhattan plot")
```

## Results: Principal Component Analysis (Lasse)

<div style="float: left; width: 50%;">

- PCA: Simplification of variation
- Large values -> Large Protein3 expression
- Equal distribution
- Not useful for analysis

</div> 

<div style="float: right; width: 50%;">

```{r PCAver3, echo=FALSE, out.width='320px', out.height='270px', fig.align= 'center'}
knitr::include_graphics(c("/cloud/project/results/PCA_rotation_matrix.png","/cloud/project/results/PCA_barplot_PCAs.png"))
```

</div> 


## Results

### Shiny Application (Mikkel)
- Link
- Short demo


## Discussion/Conclusion (Helene)
### Summary
- Data visualization, PC analysis, logistic regression modelling and shiny app creation
- Organized file structure

### Conclusions
- Stage most people die from stage III cancer.

### Improvementes
- Where does the data comes from? (in what context was is created?)
- What are the four proteins?




